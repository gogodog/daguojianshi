<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dgjs.mapper.content.DraftAPRecordMapper">

    <insert id="save" parameterType="draftAPRecord" keyProperty="id">
	  insert into draft_ap_record 
	  (
	           draft_id,
               create_time,
               operator,
               action,
               operate_desc
	  )
	  values
	  (
	           #{draft_id},
               now(),
               #{operator},
               #{action},
               #{operate_desc}
	  )
   </insert>

   <select id="list" resultType="draftAPRecord">
       select id,draft_id,create_time,operator,action,operate_desc from draft_ap_record
       <where>
          <if test="operator!=null">operator=#{operator}</if>
          <if test="draft_ids!=null and draft_ids.size()>0">
            and draft_id in
            <foreach collection="draft_ids" index="index" item="item" open="(" separator="," close=")">
             #{item}
            </foreach>
          </if>
          <if test="status_list!=null and status_list.size()>0">
            and action in
            <foreach collection="status_list" index="index" item="item" open="(" separator="," close=")">
             #{item}
            </foreach>
          </if>
       </where> 
       limit 0,100
   </select>
</mapper>